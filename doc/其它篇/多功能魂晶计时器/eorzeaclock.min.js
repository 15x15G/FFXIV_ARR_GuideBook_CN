function EorzeaClock(q,v,g){var p,b,w,z,c,h,u,i,n,a,s,d,e,y,m,r,x,o,l,k,f,t,j;j="2014.04.22";x=new Date();m=new Date("Sat, 13 Jul 2010 1:00:00 GMT+0900");o=new Date("Sat, 13 Jul 2010 0:00:00 GMT+0000");r=0;r+=-20571;n=new Array("星1","灵1","星2","灵2","星3","灵3","星4","灵4","星5","灵5","星6","灵6");eorzea_month_element_names=new Array("冰","冰","水","水","风","风","雷","雷","火","火","土","土");d=new Array("ice","ice","water","water","wind","wind","lightning","lightning","fire","fire","earth","earth");a=new Array("风属日","雷属日","火属日","土属日","冰属日","水属日","星属日","灵属日");e=new Array("wind","lightning","fire","earth","ice","water","astral","umbral");s=new Array("风属时","雷属时","火属时","土属时","冰属时","水属时","风属时","雷属时","火属时","土属时","冰属时","水属时","风属时","雷属时","火属时","土属时","冰属时","水属时","风属时","雷属时","火属时","土属时","冰属时","水属时");y=new Array("wind","lightning","fire","earth","ice","water","wind","lightning","fire","earth","ice","water","wind","lightning","fire","earth","ice","water","wind","lightning","fire","earth","ice","water");l=function(B,A,C,F,E,G){var D;D=B;D=D*12+A;D=D*32+C;D=D*24+F;D=D*60+E;D=D*60*1000;D=D-r;D=D*70/1440;date=new Date(m.getTime()+D);D=date.getTime()-x.getTime();while(D<0){D+=G*70/1440}return(D)};GetCountDownString=function(C){var E,D,F,A,B;E=C%1000;C=(C-E)/1000;D=C%60;C=(C-D)/60;F=C%60;C=(C-F)/60;A=C%24;C=(C-A)/24;B=C;if(B==0){if(A==0){if(F==0){return(D+"秒后")}else{if(F==1){return((60+D)+"秒后")}else{return(F+"分钟后")}}}else{if(A==1){return((60+F)+"分钟后")}else{return(A+"小时"+(F<10?"0"+F:F)+"分钟后")}}}else{if(B==1){return((24+A)+"小时后")}else{return(B+"日"+(A<10?"0"+A:A)+"小时后")}}};AtomaInfo=function(N,C,I,R,G,E){var U,O,Q,M,S,P,T,B,W,D,H,K,V,J,L,F,A;U=new Array("摩羯座","水瓶座","双鱼座","白羊座","金牛座","双子座","巨蟹座","狮子座","处女座","天秤座","天蝎座","射手座");O=new Array("东部林区","拉诺西亚高地","拉诺西亚低地","中央拉诺西亚","东萨纳兰","西萨纳兰","西拉诺西亚","拉诺西亚外地","中央林区","中央萨纳兰","南萨纳兰","北部林区");Q=new Array("ice","ice","water","water","wind","wind","lightning","lightning","fire","fire","earth","earth");atoma_elementals2=new Array("umbral","umbral","umbral","umbral","astral","astral","astral","astral","astral","astral","umbral","umbral");M=e[R];S=y[G];P=33177600000;T=691200000;cycle_koku=21600000;W=new Array(l(N,0,0,0,0,P),l(N,1,0,0,0,P),l(N,2,0,0,0,P),l(N,3,0,0,0,P),l(N,4,0,0,0,P),l(N,5,0,0,0,P),l(N,6,0,0,0,P),l(N,7,0,0,0,P),l(N,8,0,0,0,P),l(N,9,0,0,0,P),l(N,10,0,0,0,P),l(N,11,0,0,0,P));count_down_days_of_week=new Array(l(N,C,0,0,0,T),l(N,C,1,0,0,T),l(N,C,2,0,0,T),l(N,C,3,0,0,T),l(N,C,4,0,0,T),l(N,C,5,0,0,T),l(N,C,6,0,0,T),l(N,C,7,0,0,T));D=new Array(Math.min(count_down_days_of_week[4],count_down_days_of_week[7]),Math.min(count_down_days_of_week[4],count_down_days_of_week[7]),Math.min(count_down_days_of_week[5],count_down_days_of_week[7]),Math.min(count_down_days_of_week[5],count_down_days_of_week[7]),Math.min(count_down_days_of_week[0],count_down_days_of_week[6]),Math.min(count_down_days_of_week[0],count_down_days_of_week[6]),Math.min(count_down_days_of_week[1],count_down_days_of_week[6]),Math.min(count_down_days_of_week[1],count_down_days_of_week[6]),Math.min(count_down_days_of_week[2],count_down_days_of_week[6]),Math.min(count_down_days_of_week[2],count_down_days_of_week[6]),Math.min(count_down_days_of_week[3],count_down_days_of_week[7]),Math.min(count_down_days_of_week[3],count_down_days_of_week[7]));count_down_hours=new Array(l(N,C,I,0,0,cycle_koku),l(N,C,I,1,0,cycle_koku),l(N,C,I,2,0,cycle_koku),l(N,C,I,3,0,cycle_koku),l(N,C,I,4,0,cycle_koku),l(N,C,I,5,0,cycle_koku));H=new Array(count_down_hours[4],count_down_hours[4],count_down_hours[5],count_down_hours[5],count_down_hours[0],count_down_hours[0],count_down_hours[1],count_down_hours[1],count_down_hours[2],count_down_hours[2],count_down_hours[3],count_down_hours[3]);K=l(N,C+1,0,0,0,P);V=l(N,C,I+1,0,0,T);J=l(N,C,I,G+1,0,B);L='<table border="1" cellpadding="2" cellspacing="0"><tr><th style="text-align: center;">魂晶</th><th style="text-align: center;">地点</th><th style="text-align: center;width:150px;">游戏内对应月</th><th style="text-align: center;width:150px;;">游戏内对应日</th><th style="text-align: center;width:150px;">游戏内对应刻</th></tr>';for(F=0;F<12;++F){A=Q[F];element2=atoma_elementals2[F];L=L+'<tr class="eorzeaclock_style_element_'+A+'"><td><input id="eorzeaclock_check_atoma_'+F+'" name="eorzeaclock_check_atoma_'+F+'" type="checkbox" onclick="EorzeaClock_OnClicked(this)"/><label for="eorzeaclock_check_atoma_'+F+'">'+U[F]+"</label></td><td>"+O[F]+"</td>"+(C==F?'<td style="text-align: center;color:red;" class="eorzeaclock_atoma_matched_row_style">掉落机率上升!<br />'+GetCountDownString(K)+"结束</td>":'<td style="text-align: right;" class="eorzeaclock_atoma_unmatched_row_style">'+GetCountDownString(W[F])+"到来</td>")+(M==A||M==element2?'<td style="text-align: center;color:red;" class="eorzeaclock_atoma_matched_row_style">掉落机率上升!<br />'+GetCountDownString(V)+"结束</td>":'<td style="text-align: right;" class="eorzeaclock_atoma_unmatched_row_style">'+GetCountDownString(D[F])+"到来</td>")+(S==A?'<td style="text-align: center;color:red;" class="eorzeaclock_atoma_matched_row_style">掉落机率上升!<br />'+GetCountDownString(J)+"结束</td>":'<td style="text-align: right;" class="eorzeaclock_atoma_unmatched_row_style">'+GetCountDownString(H[F])+"到来</td>")+"</tr>"}L=L+'</table><p style="margin-bottom:5px;">■使用须知■</p><ul><li>使用本计时器前请先阅读电子攻略书中「魂晶掉落机制」一文。</li><li class="eorzeaclock_enabled_row_style">同一行多次显示<span class="eorzeaclock_atoma_matched_row_style" style="padding: 2px;margin: 2px;color:red;">掉落机率上升!</span>，表示掉落机率会进一步提高。</li><li>刷魂晶前请先确认自己是否装备+1古武，以及已经入手的魂晶。</li><li>将<input type="checkbox" checked style="vertical-align:-2px;"/>点掉，可隐藏、点亮该行显示内容。</li><li>计时器与使用者计算机的本地时间同步，使用前请先校准自己计算机的本地时间。</li><li>多功能魂晶计时器 ver1.0，Powered By 电子攻略书制作组。</li></ul>';return(L)};k=function(V){var E,M,H,P,R,O,C,I,K,B,Q,S,U,N,L,W,D,A,J,F,G,T;E=x.getTime()-m.getTime();M=E*1440/70;H=M+r;P=H;R=P%1000;P=(P-R)/1000;O=P%60;P=(P-O)/60;C=P%60;P=(P-C)/60;I=P%24;P=(P-I)/24;K=P%32;P=(P-K)/32;B=P%12;P=(P-B)/12;Q=P;S=K%8;U=Q+"年";N='<span class="eorzeaclock_style_element_'+d[B]+'">'+n[B]+"月("+eorzea_month_element_names[B]+")</span>";L='<span class="eorzeaclock_style_element_'+e[S]+'">'+(K+1)+"日("+a[S]+")</span>";W=I;if(I<10){W="0"+I}D=C;if(C<10){D="0"+C}A=O;if(O<10){A="0"+O}J='<span class="eorzeaclock_style_element_'+y[I]+'">'+W+":"+D+"（"+s[I]+"）</span>";G="<table border='1' cellpadding='2' cellspacing='0'><tr><td>"+N+"</td><td>"+L+"</td><td>"+J+"</td></tr></table>";if(V){T=AtomaInfo(Q,B,K,S,I,C)}else{T=""}F=(60-(O+R/1000))*70/1440;return(new Array(G,F,T))};f=function(){var A,B,C;A=x.getHours();B=x.getMinutes();C=x.getSeconds();return(new Array(A+":"+(B<10?"0"+B:B)+":"+(C<10?"0"+C:C),1-x.getMilliseconds()/1000))};t=function(){var E,H,I,B,F,C,G,A,D;E=43200000;H=E-(x-o)%E;I=H%1000;H=(H-I)/1000;B=H%60;H=(H-B)/60;F=H%60;H=(H-F)/60;C=H;G=C;A=F;D=B;if(C==0){if(F==0){return(B+"秒后")}else{return(F+"分"+(B<10?"0"+B:B)+"秒后")}}else{return(C+"小时"+(F<10?"0"+F:F)+"分"+(B<10?"0"+B:B)+"秒后")}};p=k(v);b=f();w=t();c=0;for(h=0;h<12;++h){u=document.getElementsByName("eorzeaclock_check_atoma_"+h);if(u.length!=1||u[0].checked){c|=1<<h}}z='<div class="'+(v?"eorzeaclock_detail_style":"eorzeaclock_summary_style")+'"><dl><dt>■艾欧泽亚时间■</dt><dd class="eorzeaclock_datetime">'+p[0]+'</dd><dt>■地球时间■</dt><dd class="eorzeaclock_datetime">'+b[0]+'</dd><dt>■下次理符受理限额发布(每次3个)■</dt><dd class="eorzeaclock_datetime">'+w+"</dd><dt>■下次大国防军筹集任务更新■</dt><dd class='eorzeaclock_datetime' style='height:20px;'><div id='EorzeaTask'>"+etData2()+"</div></dd><dt>■容易掉落魂晶的时间段■</dt><dd>"+(v?p[2]:'<a href="'+g+'">=>详情<a>')+"</dd></dl>"+(v?"":"")+"</div>";document.getElementById(q).innerHTML=z;for(h=0;h<12;++h){u=document.getElementsByName("eorzeaclock_check_atoma_"+h);if(u.length==1){i=(c&1<<h)!=0;u[0].checked=i;EorzeaClock_OnClicked(u[0])}}setTimeout('EorzeaClock("'+q+'", '+v+', "'+g+'")',Math.max(10,Math.max(Math.min(p[1],b[1]),0.1)*1000))}function EorzeaClock_OnClicked(a){var c,b;c=function(j,h){var f,k,g,e,d;f=new Array();k=new Array();g=j.className.split(" ").concat(h.split(" "));for(e in g){if(g[e]!=""){f[g[e]]=0}}for(d in f){k.push(d)}j.className=k.join(" ")};b=function(k,m){var l,h,g,f,e,d;l=new Array();h=k.className.split(" ");g=m.split(" ");for(f in h){d=true;for(e in g){if(h[f]==g[e]){d=false;break}}if(d){l.push(h[f])}}k.className=l.join(" ")};if(a.checked){b(a.parentNode.parentNode,"eorzeaclock_disabled_row_style");c(a.parentNode.parentNode,"eorzeaclock_enabled_row_style")}else{b(a.parentNode.parentNode,"eorzeaclock_enabled_row_style");c(a.parentNode.parentNode,"eorzeaclock_disabled_row_style")}};